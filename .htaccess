# ================================================
# OPTIMIZED WEBSITE CONFIGURATION FOR CPANEL
# ================================================

# Enable URL Rewriting
RewriteEngine On

# ================================================
# ALLOW ALL ASSET FILES TO LOAD
# ================================================

# Allow CSS, JavaScript, Images, Fonts - NO HOTLINK PROTECTION
<FilesMatch "\.(css|js|jpg|jpeg|png|gif|webp|svg|ico|woff|woff2|ttf|otf|eot)$">
    <IfModule mod_headers.c>
        Header set Cache-Control "public, max-age=31536000"
    </IfModule>
</FilesMatch>

# ================================================
# ALLOW SEARCH ENGINE ACCESS
# ================================================

<FilesMatch "^(sitemap\.xml|robots\.txt)$">
    Order Allow,Deny
    Allow from all
    Satisfy Any
</FilesMatch>

# ================================================
# DISABLE DIRECTORY LISTING
# ================================================
Options -Indexes

# ================================================
# REMOVE SERVER SIGNATURE
# ================================================
ServerSignature Off

# ================================================
# SECURITY HEADERS
# ================================================

<IfModule mod_headers.c>
    # Prevent clickjacking attacks
    Header always set X-Frame-Options "SAMEORIGIN"
    
    # Enable XSS protection
    Header always set X-XSS-Protection "1; mode=block"
    
    # Prevent MIME type sniffing
    Header always set X-Content-Type-Options "nosniff"
    
    # Referrer policy
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Strict Transport Security (HSTS)
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    
    # Remove server signature
    Header always unset X-Powered-By
</IfModule>

# ================================================
# BROWSER CACHING FOR PERFORMANCE
# ================================================
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType text/x-javascript "access plus 1 month"
    ExpiresDefault "access plus 7 days"
</IfModule>

# ================================================
# GZIP COMPRESSION
# ================================================
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# ================================================
# REMOVE .HTML EXTENSION FROM URLS
# ================================================
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA]

# ================================================
# BLOCK BAD BOTS
# ================================================
RewriteCond %{HTTP_USER_AGENT} ^.*(scrape|harvest|extract|grab|siphon|wget|curl|python|sqlmap).* [NC]
RewriteRule ^(.*)$ - [F,L]

# ================================================
# FORCE HTTPS
# ================================================
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ================================================
# KEEP-ALIVE
# ================================================
<IfModule mod_headers.c>
    Header set Connection keep-alive
</IfModule>
